{"version":3,"sources":["webpack:///./src/components/summaryTable.js","webpack:///./src/components/globalStyle.js","webpack:///./src/utils.js","webpack:///./src/pages/index.js"],"names":["toRow","_ref","index","node","results","job","testResult","react_default","a","createElement","pusher","name","commit","id","substr","total","failed","length","dist_default","fromNow","ago","timestamp","StyledTable","styled","table","_templateObject","SummaryTable","props","commits","map","createGlobalStyle","globalStyle_templateObject","latestCommit","ld","maxBy","c","MainContainer","div","pages_templateObject","Layout","children","pageQuery","__webpack_exports__","commitsPerPerson","data","groupBy","d","latestCommitPerPerson","allDataJson","edges","sortedCommits","sortBy","globalStyle","pages_Layout","summaryTable"],"mappings":"ycAIA,IAAMA,EAAQ,SAAAC,EAAQC,GAAU,IAAhBC,EAAgBF,EAAhBE,KACVC,EAAUD,EAAKE,IAAID,QAAQE,WAC/B,OAAOC,EAAAC,EAAAC,cAAA,UACLF,EAAAC,EAAAC,cAAA,UAAKP,EAAM,GACXK,EAAAC,EAAAC,cAAA,UAAKN,EAAKO,OAAOC,MACjBJ,EAAAC,EAAAC,cAAA,UAAKN,EAAKS,OAAOC,GAAGC,OAAO,EAAE,IAC7BP,EAAAC,EAAAC,cAAA,UAAKL,EAAQW,MAAQX,EAAQY,OAAOC,OAApC,MAA+Cb,EAAQW,OACvDR,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAACS,EAAAV,EAAD,CAAQW,SAAO,EAACC,KAAG,GAAEjB,EAAKS,OAAOS,cAInCC,EAAcC,IAAOC,MAAVC,KA8BFC,EAfM,SAAAC,GAAK,OAAKpB,EAAAC,EAAAC,cAACa,EAAD,KAC7Bf,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,gBACAF,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,iBACAF,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,oBAGJF,EAAAC,EAAAC,cAAA,aACGkB,EAAMC,QAAQC,IAAI7B,yMCvCR8B,kBAAfC,uBCAMC,EAAe,SAAAJ,GAAO,OAAIK,IAAGC,MAAMN,EAAQ,SAACO,GAAD,OAAKA,EAAEhC,KAAKS,OAAOS,uJCMpE,IAAMe,EAAgBb,IAAOc,IAAVC,KAKbC,EAAS,SAAAZ,GAAK,OAAIpB,EAAAC,EAAAC,cAAC2B,EAAD,KAAgBT,EAAMa,WAQjCC,GANEC,EAAA,iBAAAzC,GAAY,IACnB0C,EDb6B,SAACC,GAAD,OAAUX,IAAGJ,IAAII,IAAGY,QAAQD,EAAK,SAACE,GAAD,OAAKA,EAAE3C,KAAKO,OAAOC,OAAMqB,GCapEe,CADA9C,EAAV2C,KACqCI,YAAYC,OAC1DC,EAAgBjB,IAAGkB,OAAOR,EAAiB,SAACR,GAAD,OAAKA,EAAEhC,KAAKE,IAAID,QAAQE,WAAWU,OAAOC,SAC3F,OAAQV,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAC2C,EAAD,MAAc7C,EAAAC,EAAAC,cAAC4C,EAAD,KAAQ9C,EAAAC,EAAAC,cAAC6C,EAAD,CAAc1B,QAASsB,OAGtC","file":"component---src-pages-index-js-b1489337a3445c12c92f.js","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport Moment from \"react-moment\";\n\nconst toRow = ({node},index) => {\n  let results = node.job.results.testResult;\n  return <tr>\n    <td>{index+1}</td>\n    <td>{node.pusher.name}</td>\n    <td>{node.commit.id.substr(0,8)}</td>\n    <td>{results.total - results.failed.length} / {results.total}</td>\n    <td><Moment fromNow ago>{node.commit.timestamp}</Moment></td>\n  </tr>\n}\n\nconst StyledTable = styled.table`\n  font-size: 15px;\n  margin: 0 auto;\n  border-collapse: collapse;\n  border-spacing: 0;\n  thead {\n    background-color: #2196F3;\n    color: white;\n  }\n  td, th {\n    border: 1px solid #ddd;\n    padding: 5px;\n  }\n`\n\nconst SummaryTable = props => (<StyledTable>\n  <thead>\n    <tr>\n      <th>No</th>\n      <th>Username</th>\n      <th>SHA</th>\n      <th>Pass %</th>\n      <th>Time</th>\n    </tr>\n  </thead>\n  <tbody>\n    {props.commits.map(toRow)}\n  </tbody>\n</StyledTable>)\n\nexport default SummaryTable;","import {createGlobalStyle} from 'styled-components';\n\nexport default createGlobalStyle`\n  @import url('https://fonts.googleapis.com/css?family=Ubuntu+Mono');\n\n  body {\n    font-family: 'Ubuntu Mono', monospace;\n  }\n`\n","import ld from \"lodash\";\n\nconst latestCommit = commits => ld.maxBy(commits,(c)=>c.node.commit.timestamp);\nexport const latestCommitPerPerson = (data) => ld.map(ld.groupBy(data,(d)=>d.node.pusher.name),latestCommit);\n\n","import React from \"react\"\nimport { graphql } from \"gatsby\";\nimport SummaryTable from \"../components/summaryTable\";\nimport GlobalStyle from \"../components/globalStyle\";\nimport {latestCommitPerPerson} from \"../utils.js\";\nimport styled from \"styled-components\";\nimport ld from \"lodash\"\n\nconst MainContainer = styled.div`\n  width:960px;\n  margin: 0 auto;\n`\n\nconst Layout = props => <MainContainer>{props.children}</MainContainer>\n\nexport default ({data}) => {\n  const commitsPerPerson = latestCommitPerPerson(data.allDataJson.edges);\n  const sortedCommits = ld.sortBy(commitsPerPerson,(c)=>c.node.job.results.testResult.failed.length);\n  return (<div><GlobalStyle/><Layout><SummaryTable commits={sortedCommits}/></Layout></div>)\n}\n\nexport const pageQuery = graphql`\n  query {\n    allDataJson {\n      edges {\n        node {\n          pusher {\n            name\n            email\n          }\n          commit {\n            id\n            timestamp\n          }\n          project {\n            name\n          }\n          job {\n            results {\n              testResult {\n                total,\n                failed {\n                  suite,\n                  title\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }`"],"sourceRoot":""}